<div>
  <h2>Create User</h2>

  <form class="form-st" [formGroup]="form" (ngSubmit)="saveUser()">
    <div class="form-group">
      <label>First Name</label>
      <input type="text" formControlName="firstName"
      [ngClass]="{ 'is-invalid': submitted && formCon['firstName'].errors }"
       class="form-control" placeholder="ex: Ashraf">

       @if (submitted && formCon['firstName'].errors) {
          <div class="invalid-feedback">
              @if(formCon['firstName'].errors['required']){
                  <div>First Name is required</div>
              } @if (formCon['firstName'].errors['pattern']) {
                      <div>First Name accepts only Alpha</div>
              } @if (formCon['firstName'].errors['maxlength']) {
                  <div>First Name must not exceed 36 characters</div>
              }  
          </div>
       }
    </div>

    <div class="form-group">
      <label>Last Name</label>
      <input type="text" formControlName="lastName"
      [ngClass]="{ 'is-invalid': submitted && formCon['lastName'].errors }"
       class="form-control" placeholder="ex: Ablia">

       @if (submitted && formCon['lastName'].errors) {
          <div class="invalid-feedback">
              @if(formCon['lastName'].errors['required']){
                  <div>Last Name is required</div>
              } @if (formCon['lastName'].errors['pattern']) {
                      <div>Last Name accepts only Alpha</div>
              } @if (formCon['lastName'].errors['maxlength']) {
                  <div>Last Name must not exceed 36 characters</div>
              }  
          </div>
       }
    </div>


    <div class="form-group">
      <label>Username</label>
      <input type="text" formControlName="username" (blur)="validateUsername()"
      [ngClass]="{ 'is-invalid': submitted && formCon['username'].errors }"
       class="form-control" placeholder="ex: ashf12">

       @if (submitted && formCon['username'].errors) {
          <div class="invalid-feedback">
              @if(formCon['username'].errors['required']){
                  <div>Username is required</div>
              } @if (formCon['username'].errors['pattern']) {
                      <div>Username accepts only Alpha-numeric</div>
              } @if (formCon['username'].errors['maxlength']) {
                  <div>Username must not exceed 36 characters</div>
              }
          </div> 
       }
       <div *ngIf="!usernameValid" class="alert alert-danger" role="alert">
          Username not available
        </div>
    </div>

    <div class="form-group">
      <label>Password</label>
      <input type="password" formControlName="password"
      [ngClass]="{ 'is-invalid': submitted && formCon['password'].errors }"
       class="form-control" placeholder="ex: ashf12">

       @if (submitted && formCon['password'].errors) {
          <div class="invalid-feedback">
              @if(formCon['password'].errors['required']){
                  <div>Password is required</div>
                 } @if (formCon['password'].errors['pattern']) {
                      <div>Password must contain at least one digit, one lowercase letter,<br> one uppercase letter, and one special character.</div>
              }@if (formCon['password'].errors['minlength']) { 
                  <div>Password must be at least 8 characters</div>
              }  
          </div>
       }
    </div>
    
    <button type="submit" [disabled]="!usernameValid" class="btn btn-primary">Update User</button> 
  </form>
</div>
